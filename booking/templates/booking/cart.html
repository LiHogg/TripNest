{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî TripNest</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'booking/css/cart.css' %}">
</head>
<body class="dark-theme">

  <!-- Header —Å –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –∏ –æ–±—ã—á–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
  <header class="header">
    <div class="container">
      <div class="logo">
        <a href="/"><img src="{% static 'img/logo.png' %}" alt="TripNest Logo" height="40"></a>
      </div>
      <nav class="nav main-nav">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="{% url 'hotel:hotel_list' %}">–ñ–∏–ª—å—ë</a>
        <a href="{% url 'excursion:excursion_list' %}">–≠–∫—Å–∫—É—Ä—Å–∏–∏</a>
        <a href="{% url 'transport:transport_list' %}">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</a>
      </nav>
      <div class="auth-buttons main-auth">
        <a href="{% url 'booking:cart' %}" class="cart-link">–ö–æ—Ä–∑–∏–Ω–∞</a>
        <a href="{% url 'user_profile:profile' %}">–ü—Ä–æ—Ñ–∏–ª—å</a>
        <form id="logout-form" action="{% url 'user_profile:logout' %}" method="post" style="display:none;">
          {% csrf_token %}
        </form>
        <a href="#" onclick="document.getElementById('logout-form').submit(); return false;">–í—ã–π—Ç–∏</a>
      </div>
      <div class="burger" id="burger">
        <span></span><span></span><span></span>
      </div>
      <nav class="nav burger-nav" id="burger-nav">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="{% url 'hotel:hotel_list' %}">–ñ–∏–ª—å—ë</a>
        <a href="{% url 'excursion:excursion_list' %}">–≠–∫—Å–∫—É—Ä—Å–∏–∏</a>
        <a href="{% url 'transport:transport_list' %}">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</a>
        <a href="{% url 'booking:cart' %}">–ö–æ—Ä–∑–∏–Ω–∞</a>
        <a href="{% url 'user_profile:profile' %}">–ü—Ä–æ—Ñ–∏–ª—å</a>
        <a href="#" onclick="document.getElementById('logout-form').submit(); return false;">–í—ã–π—Ç–∏</a>
      </nav>
    </div>
  </header>

  <main class="cart-main">
    <h1>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>

    {% if items %}
      <ul class="cart-items">
        {% for item in items %}
          <li class="cart-item">

            {# –ê–≤–∏–∞ #}
            {% if item.flight_ticket %}
              ‚úàÔ∏è –†–µ–π—Å ‚Ññ{{ item.flight_ticket.flight.flight_number }}<br>
              –û—Ç–∫—É–¥–∞ ‚Üí –∫—É–¥–∞: {{ item.flight_ticket.flight.departure_city }} ‚Üí {{ item.flight_ticket.flight.arrival_city }}<br>
              –í—ã–ª–µ—Ç: {{ item.flight_ticket.flight.departure_time|date:"H:i d.m.Y" }}<br>
              –¶–µ–Ω–∞: {{ item.flight_ticket.price }} ‚ÇΩ

            {# –ñ/–¥ #}
            {% elif item.train_ticket %}
              üöÜ –ü–æ–µ–∑–¥ ‚Ññ{{ item.train_ticket.train.train_number }}<br>
              –ú–∞—Ä—à—Ä—É—Ç: {{ item.train_ticket.train.departure_station }} ‚Üí {{ item.train_ticket.train.arrival_station }}<br>
              –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {{ item.train_ticket.departure_time|date:"H:i d.m.Y" }}<br>
              –¶–µ–Ω–∞: {{ item.train_ticket.price }} ‚ÇΩ

            {# –û—Ç–µ–ª—å #}
            {% elif item.hotel_room %}
              üè® –û—Ç–µ–ª—å ¬´{{ item.hotel_room.hotel.name }}¬ª, {{ item.hotel_room.get_room_class_display }}<br>
              –¶–µ–Ω–∞ –∑–∞ –Ω–æ—á—å: {{ item.hotel_room.price_per_night }} ‚ÇΩ

            {# –≠–∫—Å–∫—É—Ä—Å–∏—è #}
            {% elif item.excursion %}
              üó∫ –≠–∫—Å–∫—É—Ä—Å–∏—è ¬´{{ item.excursion.name }}¬ª<br>
              –ì–æ—Ä–æ–¥: {{ item.excursion.city.name }}<br>
              –¶–µ–Ω–∞: {{ item.excursion.price_per_person }} ‚ÇΩ
            {% endif %}

            <form method="post" action="{% url 'booking:remove_from_cart' item.id %}">
              {% csrf_token %}
              <button type="submit" class="btn-remove">–£–¥–∞–ª–∏—Ç—å</button>
            </form>
          </li>
        {% endfor %}
      </ul>

      {# –ë–ª–æ–∫ –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã #}
      <div class="cart-summary">
        –ò—Ç–æ–≥–æ: {{ total }} ‚ÇΩ
      </div>

      <div class="cart-actions">
        <a href="{% url 'booking:confirm_booking' %}" class="btn-confirm">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
      </div>
    {% else %}
      <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
    {% endif %}
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-logo">
        <img src="{% static 'img/logo.png' %}" alt="TripNest Logo" height="30">
        <p>
          TripNest ‚Äî –≤—Å—ë –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ: –æ—Ç–µ–ª–∏, –¥–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã, —ç–∫—Å–∫—É—Ä—Å–∏–∏, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç.<br>
          –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7 ‚Ä¢ support@tripnest.com
        </p>
      </div>
      <div class="social">
        <p>–ú—ã –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö:</p>
        <a href="#">VK</a>
        <a href="#">Skype</a>
        <a href="#">Telegram</a>
      </div>
    </div>
    <p class="copyright">¬© TripNest, 2025. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</p>
  </footer>
<!-- JS –¥–ª—è –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const burgerBtn = document.getElementById("burgerBtn");
  const burgerMenu = document.getElementById("burgerMenu");
  const menuOverlay = document.getElementById("menuOverlay");

  if (burgerBtn && burgerMenu && menuOverlay) {
    // –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é
    burgerBtn.addEventListener("click", function() {
      burgerMenu.classList.toggle("open");
      menuOverlay.classList.toggle("open");
      document.body.classList.toggle("menu-open");
    });

    // –ö–ª–∏–∫ –≤–Ω–µ –º–µ–Ω—é ‚Äî –∑–∞–∫—Ä—ã—Ç—å
    menuOverlay.addEventListener("click", function() {
      burgerMenu.classList.remove("open");
      menuOverlay.classList.remove("open");
      document.body.classList.remove("menu-open");
    });
  }
});
</script>


</body>
</html>
